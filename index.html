<!DOCTYPE html>
<html>

<head>
  <title>Todolist App</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>

<body>
  <div class="container">
    <h1>Todolist</h1>
    <table id="todolistTable" class="table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Content</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <form id="addForm">
      <div class="form-group">
        <label for="titleInput">Title</label>
        <input type="text" class="form-control" id="titleInput" placeholder="Enter title">
      </div>
      <div class="form-group">
        <label for="contentInput">Content</label>
        <input type="text" class="form-control" id="contentInput" placeholder="Enter content">
      </div>
      <button type="submit" class="btn btn-primary">Add</button>
    </form>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script>
    $(document).ready(function () {
      $.ajax({
        url: '/todolist',
        method: 'GET',
        success: function (response) {
          var tbody = $('#todolistTable tbody');
          tbody.empty();
          response.forEach(function (item) {
            var row = $('<tr>');
            row.append($('<td>').text(item.title));
            row.append($('<td>').text(item.content));
            tbody.append(row);
          });
        },
        error: function (error) {
          console.log(error);
        }
      });
      $('#addForm').submit(function (event) {
        event.preventDefault();
        var title = $('#titleInput').val();
        var content = $('#contentInput').val();
        $.ajax({
          url: '/todolist',
          method: 'POST',
          data: {
            title: title,
            content: content
          },
          success: function (response) {
            location.reload();
          },
          error: function (error) {
            console.log(error);
          }
        });
      });
    });
  </script>
</body>

</html>